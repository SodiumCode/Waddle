<root><head><waddleversion>0</waddleversion><dataversion>0</dataversion></head><body><blocks><xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="PbZMU*8`e35h+G;dM,#i">startColor</variable></variables><block type="vw_defTypes" id="#($p`(B0gLMeNNqP9=%v" x="0" y="0"><field name="type">SAMPLE_BLINK_BUTTON_WIDGET</field><field name="icon">https://static.codemao.cn/appcraft/extension-widgets/production/blink-button.svg</field><field name="title">闪烁按钮</field><field name="version">1.0.0</field><field name="width">68</field><field name="height">40</field><next><block type="vw_defWidget" id="vPD/UG[D8!mHTmj5n.x["><statement name="constructor"><block type="ivw_propsinit" id="k*_/T5q;Cu+L`wQ@J!v6"><field name="props_name">content</field><next><block type="ivw_propsinit" id="{zH[4n)i_Q$XeVINM*H}"><field name="props_name">backgroundColor</field><next><block type="ivw_propsinit" id="bKX!~k?;OV{T)6_md8po"><field name="props_name">textColor</field><next><block type="ivw_propsinit" id="v`1_e)cdrUs8Z+mJWbUe"><field name="props_name">fontSize</field><next><block type="ivw_propsinit" id="?{?wO9bY,bwJl5a}Hv_j"><field name="props_name">borderRadius</field></block></next></block></next></block></next></block></next></block></statement><statement name="render"><block type="vw_returnrender" id="F#xc23MhHgNJ@vp)#3fz"><statement name="HTML"><block type="html_button" id="rA8a$(O;(8F9:0ub|AQI"><statement name="CON"><block type="html_js" id="2Z2Ad^Ua{2)uj5@dQfxP"><value name="E"><block type="ivw_getproperty" id="9vuPG@S@AuRr,eWpOZ!l"><field name="KEY">content</field></block></value></block></statement><statement name="PRO"><block type="html_attribute_event" id="FbsZuuv`aZ8VO_voryc."><field name="eventName">onClick</field><field name="widgetEventName">onClick</field><next><block type="html_attribute_style" id="#bc:*7).K|GqnG!D/kLx"><statement name="CON"><block type="html_css" id="k{lcKcu-I)9[@J0%YOJ="><field name="NAME">background</field><value name="VAL"><block type="ivw_getproperty" id="k!k=Kc~|Fbj$r9az-,I?"><field name="KEY">backgroundColor</field></block></value><next><block type="html_css" id="w(99pOJVSV*fH!l=c24!"><field name="NAME">minWidth</field><value name="VAL"><block type="math_number" id="fW$|.P(yEB(uxJSR2.W!"><field name="NUM">30</field></block></value><next><block type="html_css" id="J!1[kPd*%s}/35bbbrlv"><field name="NAME">minHeight</field><value name="VAL"><block type="math_number" id="OP{to}vsdfh[(@oT$GiO"><field name="NUM">20</field></block></value><next><block type="html_css" id="fp5[uJNzG##?+djhh9GH"><field name="NAME">width</field><value name="VAL"><block type="html_other_%" id="8/_Mm8!aowfg=}7zh2;]"><value name="VAL"><shadow type="math_number" id="`_E/=kD+fFFC/N931@PT"><field name="NUM">100</field></shadow></value></block></value><next><block type="html_css" id=":i:s,w_j|Te8Ru:+jjdL"><field name="NAME">height</field><value name="VAL"><block type="html_other_%" id="o0u5!}AQ9!Lv.$J|.S}3"><value name="VAL"><shadow type="math_number" id="zM{7h}}L(VHV:VWc;`!;"><field name="NUM">100</field></shadow></value></block></value><next><block type="html_css" id="f5a5m[-/Vu`C6PiRGeGt"><field name="NAME">border</field><value name="VAL"><block type="text" id="E}_;5};A|y,rCb]w,C%E"><field name="TEXT">none</field></block></value><next><block type="html_css" id="ec+7JP0.U2SHv:ILTW4V"><field name="NAME">borderRadius</field><value name="VAL"><block type="ivw_getproperty" id="*STvz{LZ#x1=f[dSSN*["><field name="KEY">borderRadius</field></block></value><next><block type="html_css" id="}5R,v)O`PnZfW3$6Md~m"><field name="NAME">color</field><value name="VAL"><block type="ivw_getproperty" id="!vD3uR]{({Upe*58UwI1"><field name="KEY">textColor</field></block></value><next><block type="html_css" id="GM0vj!OpCb[uxqD|.vM1"><field name="NAME">fontSize</field><value name="VAL"><block type="ivw_getproperty" id="vosxv)ccg+q?HC8:S!Y%"><field name="KEY">fontSize</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></next></block></statement></block></statement></block></statement><next><block type="ivw_addProperty" id="K.H.BE9`zfe8i|ci+iX{"><field name="label">按钮文案</field><field name="key">content</field><field name="valueType">string</field><value name="defaultValue"><block type="text" id="F`b-ulBk=#_w!~,kjH2^"><field name="TEXT">按钮</field></block></value><next><block type="ivw_addProperty" id="w6WPEfS7Pnh]?*|vf2z5"><field name="label">按钮颜色</field><field name="key">backgroundColor</field><field name="valueType">color</field><value name="defaultValue"><block type="html_other_color" id="V$m/FnLUR1aBf%UXKiGC"><field name="VAL">1495ef</field></block></value><next><block type="ivw_addProperty" id="YN/#^)C)YeFxOHlbg2iZ"><field name="label">文本颜色</field><field name="key">textColor</field><field name="valueType">color</field><value name="defaultValue"><block type="html_other_color" id="Rv37[9$/+UmuUA/{F/#j"><field name="VAL">ffffff</field></block></value><next><block type="ivw_addProperty" id="re1C7s(*@qz~J_jXlGGr"><field name="label">字体大小</field><field name="key">fontSize</field><field name="valueType">number</field><value name="defaultValue"><block type="math_number" id="c;Y_x`N!LS}.{.T.Rp@V"><field name="NUM">16</field></block></value><next><block type="ivw_addProperty" id="H/(/9#(xXhcn8_XrxFLv"><field name="label">圆角</field><field name="key">borderRadius</field><field name="valueType">number</field><value name="defaultValue"><block type="math_number" id="8f_-d]*-0tb={$-j3q.u"><field name="NUM">5</field></block></value><next><block type="ivw_addMethod" id="]j-~8/7e%rF0S,gmQGLB"><field name="label">开始闪烁</field><field name="key">blink</field><field name="valueType">noReturn</field><statement name="code"><block type="variables_set" id="cyy~8?}}J%W-Ao-Hp%MC"><field name="VAR" id="PbZMU*8`e35h+G;dM,#i">startColor</field><value name="VALUE"><block type="ivw_getproperty" id="vA)u8[VwDrJ?Z5GH[KUO"><field name="KEY">backgroundColor</field></block></value><next><block type="js_settimeout" id="SW3PtVuKu|I$tJsW2hLH"><value name="F"><block type="js_function_value" id="6BA*ZvWmR]ZyFXVNlT;h"><statement name="C"><block type="vw_setprop" id="t-zU-(Y/2!30+(xLugVI"><field name="name">backgroundColor</field><value name="value"><block type="colour_random" id="9F%=EU,s]*+ru[phUO,?"></block></value></block></statement></block></value><value name="T"><block type="math_number" id="#}C5wgHm917YB=y%myK;"><field name="NUM">100</field></block></value><next><block type="js_settimeout" id="3Dw#)=%2/9y~3Q!aVF(p"><value name="F"><block type="js_function_value" id="8^5Q$9~J/KdX`$Dp;dB`"><statement name="C"><block type="vw_setprop" id="[]z26sY1$2M:O;!`T2J!"><field name="name">backgroundColor</field><value name="value"><block type="colour_random" id=")Y=xcg)}AgvgZp~$ic`["></block></value></block></statement></block></value><value name="T"><block type="math_number" id="8.L06U/bLMYlyr6OO,7V"><field name="NUM">200</field></block></value><next><block type="js_settimeout" id="8eMsZ#r`3#XJQz/TM(._"><value name="F"><block type="js_function_value" id="tP.pWGAXbN?0J[GQi!~R"><statement name="C"><block type="vw_setprop" id="ZnP9zYciddFhnVX48VPV"><field name="name">backgroundColor</field><value name="value"><block type="colour_random" id="hxM@WHkph6j[yLM.ES}}"></block></value></block></statement></block></value><value name="T"><block type="math_number" id="^d|e%n2whWe]SH.F|~3d"><field name="NUM">300</field></block></value><next><block type="js_settimeout" id="Q+d?7X+_F|Y5RW!.PBzN"><value name="F"><block type="js_function_value" id="@Xy5SsoL{LcH9puv;!s%"><statement name="C"><block type="vw_setprop" id="BiZ~aws_zR#J-f|k7NL)"><field name="name">backgroundColor</field><value name="value"><block type="colour_random" id="P=eLx-|,c)w:_*z4f,+m"></block></value></block></statement></block></value><value name="T"><block type="math_number" id="*2capBk{4.I.z;%.in49"><field name="NUM">400</field></block></value><next><block type="js_settimeout" id="3B!Tz0`$,H5e^kUL|LJR"><value name="F"><block type="js_function_value" id="HFIaygZa3o/;3hKR)vHT"><statement name="C"><block type="vw_setprop" id="5vkgFM0lz0k%^!!s00oj"><field name="name">backgroundColor</field><value name="value"><block type="colour_random" id="CT:W7}+AaZYgX01(v9F="></block></value></block></statement></block></value><value name="T"><block type="math_number" id="oFgG_oiAvAPo+]X=;.VY"><field name="NUM">500</field></block></value><next><block type="js_settimeout" id="~qTX$pX$(QRv{VtpF`a1"><value name="F"><block type="js_function_value" id="r#,9)^pb1;k9:s3}A_mn"><statement name="C"><block type="vw_setprop" id="PU2N3~N(W2ffAd`P~80Y"><field name="name">backgroundColor</field><value name="value"><block type="colour_random" id="VP)oqH-Mw;,@R#gsC2[v"></block></value></block></statement></block></value><value name="T"><block type="math_number" id="6JlhZ%5X)5P.7ZlwrQ=5"><field name="NUM">600</field></block></value><next><block type="js_settimeout" id=".6rN]82#!}V-Yu0M|5qe"><value name="F"><block type="js_function_value" id="By^PmY/~#)`B$RS|baDV"><statement name="C"><block type="vw_setprop" id="i3W%$p$]L},%pbFl0k%Q"><field name="name">backgroundColor</field><value name="value"><block type="variables_get" id="et-2c^d/!!PBSjD|G:_["><field name="VAR" id="PbZMU*8`e35h+G;dM,#i">startColor</field></block></value></block></statement></block></value><value name="T"><block type="math_number" id="_r[58v`AXGvjhiK1g%}{"><field name="NUM">700</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next><block type="vw_addEvent" id="I_yI-I_w,_X{}Q623!gn"><field name="label">被点击</field><field name="key">onClick</field><statement name="params"><block type="ivw_addParams" id="V83OiJos$slHKW,?N(u{"><field name="label">按钮文字</field><field name="key">content</field><field name="valueType">'string'</field></block></statement><statement name="code"><block type="ivw_emit" id="O,L-3q6+S[Jl#x*Eauf}"><field name="event">onClick</field><statement name="parameters"><block type="ivw_emitParameter" id="q9/8wYkIC.-p3BJm*$gF"><value name="parameter"><block type="ivw_getproperty" id="Q-}cKY?U3xa0|pt8Cu*i"><field name="KEY">content</field></block></value></block></statement></block></statement><next><block type="ivw_export" id="9XvRlww2v`Y)Y,zKVRPn"></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></xml></blocks><js>var startColor;

function colourRandom() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}



const types = {
  isInvisibleWidget: false,
  type: "SAMPLE_BLINK_BUTTON_WIDGET",
  icon: "https://static.codemao.cn/appcraft/extension-widgets/production/blink-button.svg",
  title: "闪烁按钮",
  version: "1.0.0",
  isGlobalWidget: false,
  properties: [
    {
      key: '__width',
      label: '宽度',
      valueType: 'number',
      defaultValue: 68,
      blockOptions: {
        generateBlock: false,
      },
    },
    {
      key: '__height',
      label: '高度',
      valueType: 'number',
      defaultValue: 40,
      blockOptions: {
        generateBlock: false,
      },
    },
    {
      key: '__size',
      label: '',
      valueType: 'number',
      defaultValue: 0,
      readonly: true,
      blockOptions: {
        setter: {
          keys: ['__height', '__width'],
        },
        getter: {
          keys: ['__height', '__width'],
        },
      },
    },
  ],
  methods: [],
  events: [],
};

class Widget extends VisibleWidget {
  constructor(props) {
    super(props);
    this.__width = props.__width;
    this.__height = props.__height;
    this.content=props.content;
  this.backgroundColor=props.backgroundColor;
  this.textColor=props.textColor;
  this.fontSize=props.fontSize;
  this.borderRadius=props.borderRadius;

  }
  render() {
    return(
      React.createElement("button", {  onClick: this.onClick.bind(this),
      style: {  background: (this.backgroundColor),
        minWidth: 30,
        minHeight: 20,
        width: "100%",
        height: "100%",
        border: 'none',
        borderRadius: (this.borderRadius),
        color: (this.textColor),
        fontSize: (this.fontSize),
      },
    }, [(this.content)])
  );

  }
}

types['properties'].push({
    key: 'content',
    label: '按钮文案',
    valueType: 'string',
    defaultValue: '按钮',

})

types['properties'].push({
    key: 'backgroundColor',
    label: '按钮颜色',
    valueType: 'color',
    defaultValue: "#1495ef",

})

types['properties'].push({
    key: 'textColor',
    label: '文本颜色',
    valueType: 'color',
    defaultValue: "#ffffff",

})

types['properties'].push({
    key: 'fontSize',
    label: '字体大小',
    valueType: 'number',
    defaultValue: 16,

})

types['properties'].push({
    key: 'borderRadius',
    label: '圆角',
    valueType: 'number',
    defaultValue: 5,

})

types['methods'].push({
    key: 'blink',
    label: '开始闪烁',
    params: [],


})
Widget.prototype.blink = function () {
      startColor = (this.backgroundColor);
  setTimeout(((()=>{  this.setProps({ 'backgroundColor': (colourRandom()) });
  })),100)
  setTimeout(((()=>{  this.setProps({ 'backgroundColor': (colourRandom()) });
  })),200)
  setTimeout(((()=>{  this.setProps({ 'backgroundColor': (colourRandom()) });
  })),300)
  setTimeout(((()=>{  this.setProps({ 'backgroundColor': (colourRandom()) });
  })),400)
  setTimeout(((()=>{  this.setProps({ 'backgroundColor': (colourRandom()) });
  })),500)
  setTimeout(((()=>{  this.setProps({ 'backgroundColor': (colourRandom()) });
  })),600)
  setTimeout(((()=>{  this.setProps({ 'backgroundColor': startColor });
  })),700)

}
types['events'].push({
    key: 'onClick',
    label: '被点击',
    params: [
      {
          key: 'content',
          label: '按钮文字',
          valueType: 'string',
          defaultValue: "",
      },],

})
Widget.prototype.onClick = function (event) {
      this.emit("onClick"  , (this.content));
}

exports.types = types;
exports.widget = Widget;
</js></body></root>